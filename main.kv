DefenderGame:

<DefenderGame>:
    id: _main_widget
    loading_screen: _loading_screen
    game_over_screen: _game_over_screen
    FloatLayout:
        id: _main_floatLayout
        size_hint: None, None
        size: root.size
        pos: root.pos
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                size: root.x + 20, root.height
                pos: root.x + 250, root.y
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                size: root.size
                pos: root.pos
                texture: root.bg_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.center_x + 100, root.center_y + 200
                texture: root.blue_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.center_x + 200, root.y + 30
                texture: root.brown_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.center_x - 250, root.center_y + 200
                texture: root.blue_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.center_x + 400, root.y + 70
                texture: root.brown_text
            Rectangle:
                size: root.x + 300, root.y + 200
                pos: root.x - 100, root.y + 450
                texture: root.st_text
            Rectangle:
                size: root.x + 300, root.y + 200
                pos: root.x - 100, root.y + 650
                texture: root.st_text
            Rectangle:
                size: root.x + 300, root.y + 200
                pos: root.x - 100, root.y + 200
                texture: root.st_text
            Rectangle:
                size: root.x + 300, root.y + 200
                pos: root.x - 100, root.y + 50
                texture: root.st_text
            Rectangle:
                size: root.x + 80, root.y + 50
                pos: root.x + 150, root.y + 350
                texture: root.barrow_text
            Rectangle:
                size: root.x + 300, root.y + 200
                pos: root.x - 100, root.y + 380
                texture: root.hurt_text
            Rectangle:
                size: root.x + 300, root.y + 200
                pos: root.x - 150, root.y - 100
                texture: root.st_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.center_x + 400, root.y + 70
                texture: root.brown_text
            Rectangle:
                size: root.x + 300, root.y + 150
                pos: root.center_x - 180, root.center_y - 200
                texture: root.water_text
            Rectangle:
                size: root.x + 100, root.y + 150
                pos: root.center_x - 300, root.center_y - 110
                texture: root.tree_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.center_x + 250, root.center_y + 250
                texture: root.stone_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.center_x + 100, root.center_y + 100
                texture: root.stone_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.center_x + 200, root.center_y - 200
                texture: root.stone_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.center_x - 200, root.center_y - 110
                texture: root.stone_text
            Rectangle:
                size: root.x + 100, root.y + 100
                pos: root.center_x, root.center_y
                texture: root.brown_text
            Rectangle:
                size: root.x + 300, root.y + 150
                pos: root.center_x + 400, root.center_y + 200
                texture: root.water_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.center_x + 300, root.y + 400
                texture: root.blue_text
            Rectangle:
                size: root.x + 150, root.y + 80
                pos: root.center_x - 100, root.center_y + 200
                texture: root.bone_text
            Rectangle:
                size: root.x + 100, root.y + 70
                pos: root.center_x + 350, root.y + 100
                texture: root.bone_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.x + 230, root.y
                texture: root.green_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.x + 230, root.y + 40
                texture: root.green_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.x + 230, root.y + 80
                texture: root.green_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.x + 230, root.y + 120
                texture: root.green_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.x + 230, root.y + 160
                texture: root.green_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.x + 230, root.y + 200
                texture: root.green_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.x + 230, root.y + 240
                texture: root.green_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.x + 230, root.y + 280
                texture: root.green_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.x + 230, root.y + 320
                texture: root.green_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.x + 230, root.y + 360
                texture: root.green_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.x + 230, root.y + 400
                texture: root.green_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.x + 230, root.y + 440
                texture: root.green_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.x + 230, root.y + 480
                texture: root.green_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.x + 230, root.y + 520
                texture: root.green_text
            Rectangle:
                size: root.x + 50, root.y + 50
                pos: root.x + 230, root.y + 560
                texture: root.green_text
        GridLayout:
            size_hint: 0.3, 0.1
            pos_hint: {"x": 0.35, "top": 1}
            rows: 2
            Image:
                id: _main_image
                source: "images/Coin_A.png"
                size_hint: 1, 1
            Label:
                id: _coins_label
                text: str(_main_widget.player_coin)
                font_size: "30dp"
                size_hint: 1, 1
                font_name: "fonts/Lcd.ttf"
                text_width: self.width
                multiline: True
        AnchorLayout:
            size_hint: 0.3, 0.12
            pos_hint: {"x": 0.05, "top": 0.98}
            BoxLayout:
                orientation: "vertical"
                ProgressBar:
                    id: _main_progressbar1
                    value: _main_widget.player_life
                    size_hint: 1, 1
                    max: 100
                Label:
                    id: _main_label1
                    text: "PLAYER LIFE"
                    font_size: "15dp"
                    size_hint: 1, 1
                    color: 1, 1, 1, 1
                ProgressBar:
                    id: _main_progressbar2
                    value: _main_widget.zombie_rage
                    max: 3600
                Label:
                    id: _main_label2
                    text: _main_widget.zombie_rage_text
                    font_size: "15dp"
                    italic: True
                    size_hint: 0.35, 1
                    color: 1, 0, 0, 1
                ProgressBar:
                    id: _main_progressbar3
                    value: _main_widget.player_timing
                    max: 72000
                    size_hint: 1, 1
                Label:
                    id: _main_label3
                    text: "SURVIVOR"
                    font_size: "13dp"
                    italic: True
                    size_hint: 1, 1
                    halign: "center"
                    valign: "middle"
        AnchorLayout:
            size_hint: 0.3, 0.15
            pos_hint: {"x": 0.65, "top": 0.99}
            BoxLayout:
                orientation: "vertical"
                ProgressBar:
                    id: _main_progressbar4
                    value: _main_widget.player_house_life
                    max: 100
                    size_hint: 1, 1
                Label:
                    id: _main_label4
                    text: _main_widget.coin_status
                    font_size: "15dp"
                    size_hint: 0.3, 1
                    halign: "center"
                    valign: "middle"
                ProgressBar:
                    id: _main_progressbar5
                    value: _main_widget.player_kills
                    max: 50
                    size_hint: 1, 1
                Label:
                    id: _main_label5
                    text: _main_widget.player_kills_status
                    font_size: "15dp"
                    size_hint: 0.3, 1
                    color: 1, 1, 1, 1
                Label:
                    id: _main_player_score_label
                    text: str(_main_widget.player_score)
                    font_name: "fonts/Lcd.ttf"
                    font_size: "30dp"
                    text_width: self.width
                    halign: "center"
                    valign: "middle"
                    multiline: True
        Button:
            id: _main_button1
            text: "PAUSE"
            size_hint: 0.15, 0.1
            pos_hint: {"x": 0.2, "y":0.05}
            color: 1, 1, 1, 1
            on_release: _main_widget.paused_state()
            background_color: 1, 1, 1, 0.5
        Button:
            id: _toggle_button
            text: "EXIT"
            size_hint: 0.15, 0.1
            pos_hint: {"x": 0.03, "y":0.05}
            on_release: app.exit_game()
            background_color: 1, 1, 1, 0.5
        Button:
            id: _main_button2
            text: ""
            size_hint: 0.23, 0.21
            pos_hint: {"x": 0.46, "y": 0.02}
            color: 1, 1, 1, 1
            background_color: 1, 1, 1, 1
            background_normal: "images/transparentDark35.png"
            background_down: "images/shadedDark37.png"
            on_press: _main_widget.bomb_clear()
            on_release: _main_widget.button_released()
        AnchorLayout:
            size_hint : 0.3, 0.5
            pos_hint: {"right": 1, "bottom":1}
            BoxLayout:
                orientation: "vertical"
                BoxLayout:
                    orientation: "vertical"
                    spacing: "20dp"
                    padding: "10dp"
                    Button:
                        id: _main_button3
                        text: ""
                        size_hint: 0.9, 1
                        color: 1, 1, 1, 1
                        background_normal: "images/transparentDark47.png"
                        background_down: "images/shadedDark49.png"
                        on_press: root.shoot_enemies_right()
                    Button:
                        id: _main_button4
                        text: ""
                        size_hint: 0.9, 1
                        color: 1, 1, 1, 1
                        background_normal: "images/transparentDark39.png"
                        background_down: "images/shadedDark41.png"
                        on_press: root.revive_house_strength()
                        on_release: _main_widget.button_released()

    GameOverScreen:
        id: _game_over_screen
        FloatLayout:
            id: _floatLayout1
            size_hint: None, None
            size: root.size
            pos: root.pos
            Image:
                source: "images/IMG-20241025-WA0006.jpg"
                size_hint: None, None
                size: _floatLayout1.size
                pos_hint: {"x": 0, "y": 0}
                allow_stretch: True
                keep_ratio: False
                color: 1, 1, 1, 1
            BoxLayout:
                orientation: "vertical"
                size_hint: 0.8, 0.3
                pos_hint: {"x": 0.1, "y": 0.45}
                padding: "10dp"
                spacing: "10dp"
                Label:
                    id: _game_over_label1
                    text: _main_label3.text
                    font_size: "60dp"
                    text_width: self.width
                    bold: True
                    italic: True
                    color: _main_label3.color
                Label:
                    id: _game_over_label2
                    text: _main_player_score_label.text
                    font_size: "50dp"
                    font_name: "fonts/Lcd.ttf"
                    text_width: self.width
                    color: _main_player_score_label.color
            BoxLayout:
                orientation: "horizontal"
                size_hint: 0.98, 0.2
                pos_hint: {"x": 0.01, "y": 0.01}
                padding: "10dp"
                spacing: "15dp"
                Button:
                    id: _game_over_button1
                    text: "I WON'T GIVE UP"
                    font_size: "20dp"
                    color: 0, 1, 0, 1
                    on_release: _main_widget.restart_game()
                Button:
                    id: _game_over_button2
                    text: "I SURRENDER"
                    font_size: "20dp"
                    color: 1, 0, 0, 1
                    on_release: app.exit_game()

    LoadingScreen:
        id: _loading_screen
        FloatLayout:
            id: _floatLayout2
            size_hint: None, None
            size: root.size
            pos: root.pos
            canvas:
                Color:
                    rgba: 1, 1, 1, 1
                Rectangle:
                    size: root.width, root.y + 200
                    pos: root.x, root.y
                    source: "images/IMG-20241027-WA0014.jpg"
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Rectangle:
                    size: root.x + 300, root.height - 50
                    pos: root.x, root.y + 50
                    source: "images/IMG-20241027-WA0007.jpg"
                Rectangle:
                    size: root.x + 500, root.height
                    pos: root.x + 300, root.y
                    source: "images/IMG-20241027-WA0010.jpg"
            Label:
                id: _button_label
                text: "CHAMPION"
                font_name: "fonts/OfficeCodeProD-BoldItalic.otf"
                font_size: "90dp"
                halign: "center"
                valign: "middle"
                text_width: self.width
                size_hint: 0.7, 0.1
                pos_hint: {"x": 0.3, "y": 0.54}
                color: 1, 0, 0, 1
            Label:
                id: _button_label
                text: "OF"
                font_name: "fonts/OfficeCodeProD-BoldItalic.otf"
                font_size: "30dp"
                halign: "center"
                valign: "middle"
                text_width: self.width
                #italic: True
                #bold: True
                size_hint: 0.7, 0.1
                pos_hint: {"x": 0.3, "y": 0.44}
                color: 1, 0, 0, 1
            Label:
                id: _button_label
                text: "HUMANITY"
                font_name: "fonts/OfficeCodeProD-BoldItalic.otf"
                font_size: "90dp"
                halign: "center"
                valign: "middle"
                text_width: self.width
                size_hint: 0.7, 0.1
                pos_hint: {"x": 0.3, "y": 0.34}
                color: 1, 0, 0, 1
            Button:
                id: _button_start
                text: "Tap The Screen"
                size_hint: None, None
                font_size: "20dp"
                size: root.size
                pos_hint: {"x": 0, "y": 0}
                background_color: 1, 1, 1, 0.1
                disabled: True
                on_release: _main_widget.load_game()
            BoxLayout:
                orientation: "horizontal"
                spacing: "20dp"
                padding: "20dp"
                size_hint: 0.9, 0.3
                pos_hint:{"x": 0, "y": 0.05}
                Label:
                    id: _loading_screen_label1
                    text: "HINTS\nShoot at zombies trying to invade the village\nAvoid Bombs and contact with Zombies\nCollect 200 Coins to fix Village Damage\nKill 50 Zombies to activate Grenade or Bomb"
                    font_size: "15dp"
                    color: 1, 1, 1, 1
                    size_hint: 1, 1
                    halign: "left"
                    valign: "middle"
                    multiline: True
                    text_width: self.width
                Label:
                    id: _loading_screen_label2
                    text: "HINTS\nMove Soldier using the left part of the screen\nUse R button to fix home damage\nUse B button to Bomb Zombies\nUse fire button to kill Zombies"
                    font_size: "15dp"
                    color: 1, 1, 1, 1
                    size_hint: 1, 1
                    valign: "middle"
                    halign: "left"
                    multiline: True
                    text_width: self.width

            Label:
                id: _loading_screen_label3
                text:"Game Loading..."
                font_size: "20dp"
                size_hint: 0.2, 0.1
                pos_hint: {"x": 0.4, "y": 0.02}
                color: 1, 0, 0, 1
            ProgressBar:
                id: _loading_screen_progressbar
                value: 0
                max: 100
                size_hint: 0.7, 0.1
                pos_hint: {"x": 0.15, "y": 0.05}
